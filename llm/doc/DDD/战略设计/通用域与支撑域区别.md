## ✳️ 支撑域 ≠ 重要性低；其特点是 **为核心域服务，具有业务上下文**

* 支撑域中包含的模块**不是通用工具**，它们是根据平台的具体业务需求定制的。
* 例如：“**对话历史管理**”、“**定时任务触发器**”虽然常见，但在大模型平台中承担**核心执行链路的支撑功能**，带有明显的业务上下文。

## ⚙️ 通用域 ≠ 功能简单；其特点是 **无业务上下文，跨多个子系统复用**

* 通用域强调的是**通用性、可移植性**，理论上你可以将这类服务抽成中台、组件甚至 SaaS 复用到其他系统。

---

## 📌 分析你的划分中有争议的模块

| 模块名          | 当前划分  | 更推荐划分               | 原因                                                         |
| ------------ | ----- | ------------------- | ---------------------------------------------------------- |
| **用户与权限系统**  | 支撑域 ✅ | ✅ 支撑域（合理）           | 这是平台为支持“智能体分级使用、权限隔离”等业务特性设计的，具备业务上下文                      |
| **操作审计**     | 支撑域 ✅ | ✅ 支撑域（合理）           | 它服务于“可溯源的合规性需求”，体现业务合规特性                                   |
| **数据统计与监控**  | 支撑域 ✅ | ✅ 支撑域（合理）           | 数据维度和聚合方式与核心域绑定（如智能体使用频率、响应质量）                             |
| **API 网关**   | 通用域 ✅ | ✅ 通用域（合理）           | 技术基础设施，支持所有模块，脱离平台业务也能复用                                   |
| **定时任务与触发器** | 支撑域 ✅ | ⚠️ *可抽象为通用域*（视具体实现） | 若是通用定时器服务（如 Quartz）→ 通用域；若 tightly coupled to RAG更新等 → 支撑域 |
| **身份认证**     | 通用域 ✅ | ✅ 通用域（合理）           | 登录注册是平台通用特性，非业务差异点                                         |
| **支付与计费**    | 通用域 ✅ | ⚠️ *建议划入支撑域*（业务差异大） | 各平台的计费模式差异极大（按模型调用/按Token/按智能体实例计费），往往成为商业闭环策略的一部分         |
| **消息与通知**    | 支撑域 ✅ | ✅ 支撑域（合理）           | 通知内容往往与具体业务流程有关（工作流完成、对话失败等）                               |
| **文件与对象存储**  | 通用域 ✅ | ✅ 通用域（合理）           | 底层功能纯技术实现（S3、OSS等），业务耦合度低                                  |

---

## 🔄 调整建议（针对“含糊区域”的明确划分）

| 模块           | 推荐划分                                                     | 理由                             |
| ------------ | -------------------------------------------------------- | ------------------------------ |
| **定时任务/触发器** | ⚠️ **如果是通用触发器服务** → 通用域<br>⚠️ **如果强耦合业务（如自动 RAG）** → 支撑域 | 判断依据是：它是否嵌入了平台业务流程逻辑           |
| **支付与计费系统**  | ✅ **支撑域**（建议调整）                                          | 计费规则因业务定制而异，属于支持平台商业化的“业务支撑”模块 |

---

## 🧭 判断技巧：支撑域 vs 通用域 的三问法

| 判断维度           | 问题                  | 支撑域倾向 | 通用域倾向 |
| -------------- | ------------------- | ----- | ----- |
| 1️⃣ 是否与业务流程绑定？ | 是否需要了解业务上下文才能开发该模块？ | 是     | 否     |
| 2️⃣ 是否有强平台差异性？ | 在不同平台中功能实现是否千差万别？   | 是     | 否     |
| 3️⃣ 是否可平台外复用？  | 拿去别的系统是否也能直接用？      | 否     | 是     |

---

## ✅ 最终建议：优化后的领域结构草图

### 🧱 支撑域（业务相关的支持能力）

* 用户与权限系统 ✅
* 操作审计 ✅
* 消息与通知 ✅
* 数据统计与监控 ✅
* 对话历史管理 ✅
* 定时任务与触发器 ✅（若具备业务耦合）
* 支付与计费 ✅（建议从通用域迁入）

### ⚙️ 通用域（跨系统共用的基础能力）

* 身份认证（OAuth2、JWT） ✅
* API 网关（限流、灰度） ✅
* 文件与对象存储（S3、OSS） ✅
* 国际化与本地化 ✅
* 定时任务/触发器（如独立调度中心）⚠️（若为纯技术服务）
