## âœ… å„åŠŸèƒ½åŸŸï¼šåº”ç”¨å±‚ & é¢†åŸŸå±‚èŒè´£å¯¹ç…§è¡¨

| åŠŸèƒ½åŸŸ                         | åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰                                       | é¢†åŸŸå±‚ï¼ˆDomain Layerï¼‰                                                                                                            |
|-----------------------------|--------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|
| **æ¨¡å‹ï¼ˆModelï¼‰**               | - æ³¨å†Œæ¨¡å‹<br>- è·å–æ¨¡å‹åˆ—è¡¨<br>- è®¾ç½®é»˜è®¤æ¨¡å‹<br>- åŒæ­¥æ¨¡å‹çŠ¶æ€                   | - æ¨¡å‹å®ä½“ï¼ˆModelEntityï¼‰<br>- æ¨¡å‹æä¾›å•†èšåˆï¼ˆProviderAggregateï¼‰<br>- æ¨¡å‹é…ç½®å€¼å¯¹è±¡ï¼ˆModelConfigï¼‰<br>- æ¨¡å‹å…¼å®¹æ€§æ£€æŸ¥æœåŠ¡ï¼ˆModelValidatorï¼‰                 |
| **çŸ¥è¯†åº“ï¼ˆKnowledgeBaseï¼‰**      | - åˆ›å»ºçŸ¥è¯†åº“<br>- æ·»åŠ æ–‡æ¡£<br>- æ„å»º Embedding ç´¢å¼•<br>- æ‰§è¡Œæ£€ç´¢             | - çŸ¥è¯†åº“èšåˆï¼ˆKnowledgeBaseAggregateï¼‰<br>- æ–‡æ¡£å®ä½“ï¼ˆDocumentï¼‰<br>- å‘é‡ç´¢å¼•ç­–ç•¥æœåŠ¡ï¼ˆEmbeddingServiceï¼‰<br>- RAG æ£€ç´¢ç­–ç•¥ï¼ˆRetrieverï¼‰                 |
| **æ’ä»¶ï¼ˆPluginï¼‰**              | - å®‰è£…æ’ä»¶<br>- æ‰§è¡Œæ’ä»¶è°ƒç”¨<br>- æ³¨å†Œæ’ä»¶ API æ¥å£<br>- è®¾ç½®æ’ä»¶æƒé™              | - æ’ä»¶èšåˆï¼ˆPluginAggregateï¼‰<br>- æ’ä»¶Schemaå€¼å¯¹è±¡ï¼ˆPluginSchemaï¼‰<br>- æ’ä»¶æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆPluginExecutionContextï¼‰<br>- æ’ä»¶å®‰å…¨ç­–ç•¥ï¼ˆPluginAuthPolicyï¼‰    |
| **æ™ºèƒ½ä½“ï¼ˆAgentï¼‰**              | - åˆ›å»º/é…ç½®Agent<br>- å¯åŠ¨Agentä»»åŠ¡<br>- æŸ¥çœ‹AgentçŠ¶æ€<br>- æŒ‡å®šæ¨¡å‹/æ’ä»¶/çŸ¥è¯†åº“  | - Agentèšåˆï¼ˆAgentAggregateï¼‰<br>- Agenté…ç½®å€¼å¯¹è±¡ï¼ˆAgentProfileï¼‰<br>- Agentæ‰§è¡Œç­–ç•¥æœåŠ¡ï¼ˆAgentRuntimePolicyï¼‰<br>- Agentè°ƒåº¦å™¨ï¼ˆAgentSchedulerï¼‰   |
| **å·¥ä½œæµï¼ˆWorkflowï¼‰**           | - åˆ›å»ºæµç¨‹<br>- æ·»åŠ èŠ‚ç‚¹<br>- æ‰§è¡Œæµç¨‹<br>- æŸ¥è¯¢æµç¨‹çŠ¶æ€                       | - å·¥ä½œæµèšåˆï¼ˆWorkflowAggregateï¼‰<br>- èŠ‚ç‚¹å®ä½“ï¼ˆNodeï¼‰<br>- èŠ‚ç‚¹è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼ˆNodeContextï¼‰<br>- èŠ‚ç‚¹ç±»å‹ç­–ç•¥æœåŠ¡ï¼ˆNodeExecutorï¼‰<br>- å¼‚æ­¥äº‹ä»¶æœºåˆ¶ï¼ˆWorkflowEventï¼‰ |
| **ä¼šè¯ï¼ˆChat Sessionï¼‰**        | - åˆ›å»ºä¼šè¯<br>- å‘é€æ¶ˆæ¯<br>- æŸ¥è¯¢å†å²<br>- è®¾å®šä¸Šä¸‹æ–‡ç­–ç•¥                      | - ä¼šè¯èšåˆï¼ˆSessionAggregateï¼‰<br>- æ¶ˆæ¯å®ä½“ï¼ˆMessageï¼‰<br>- è§’è‰²è®¾å®šå€¼å¯¹è±¡ï¼ˆPersonaï¼‰<br>- è®°å¿†ç®¡ç†å™¨ï¼ˆMemoryManagerï¼‰                                  |
| **æ—¥å¿— & ç›‘æ§ï¼ˆLog/Monitoringï¼‰** | - æŸ¥è¯¢æ‰§è¡Œæ—¥å¿—<br>- å®æ—¶ç›‘æ§æŒ‡æ ‡<br>- è®¢é˜…ç›‘æ§å‘Šè­¦                             | - æ—¥å¿—å®ä½“ï¼ˆLogEntryï¼‰<br>- æŒ‡æ ‡ä¸ŠæŠ¥æœåŠ¡ï¼ˆMetricsCollectorï¼‰<br>- å‘Šè­¦è§„åˆ™èšåˆï¼ˆAlertRuleï¼‰                                                        |
| **è®¢é˜…/è®¡è´¹ï¼ˆSubscriptionï¼‰**     | - æŸ¥è¯¢é…é¢<br>- æ¶ˆè€—ç»Ÿè®¡<br>- è®¢é˜…å¥—é¤ç®¡ç†                                 | - è®¡è´¹å®ä½“ï¼ˆBillingItemï¼‰<br>- ç”¨æˆ·é…é¢èšåˆï¼ˆQuotaAggregateï¼‰<br>- å¥—é¤å€¼å¯¹è±¡ï¼ˆPlanï¼‰                                                             |
| **åº”ç”¨ï¼ˆApplicationï¼‰**         | - åˆ›å»ºåº”ç”¨ï¼ˆAppï¼‰<br>- é…ç½®Agent/çŸ¥è¯†åº“/æ’ä»¶/æ¨¡å‹ç­‰<br>- åœ¨çº¿è°ƒè¯•åº”ç”¨<br>- å‘å¸ƒæˆ–åœæ­¢åº”ç”¨ | - åº”ç”¨èšåˆï¼ˆApplicationAggregateï¼‰<br>- åº”ç”¨ç‰ˆæœ¬å®ä½“ï¼ˆAppVersionï¼‰<br>- åº”ç”¨é…ç½®å€¼å¯¹è±¡ï¼ˆAppConfigï¼‰<br>- åº”ç”¨ä¸Šä¸‹æ–‡ç­–ç•¥æœåŠ¡ï¼ˆAppRuntimeContextï¼‰               |
| **å‘å¸ƒå¸‚åœºï¼ˆMarketplaceï¼‰**       | - ä¸Šæ¶åº”ç”¨/æ¨¡å‹/æ’ä»¶<br>- å®¡æ ¸ä¸Šæ¶èµ„æº<br>- åˆ†ç±»æµè§ˆèµ„æº<br>- ä¸‹è½½/éƒ¨ç½²èµ„æº            | - å¸‚åœºèµ„æºèšåˆï¼ˆMarketItemAggregateï¼‰<br>- èµ„æºåˆ†ç±»å®ä½“ï¼ˆCategoryï¼‰<br>- èµ„æºå®¡æ ¸ç­–ç•¥ï¼ˆReviewPolicyï¼‰<br>- å‘å¸ƒçŠ¶æ€å€¼å¯¹è±¡ï¼ˆMarketStatusï¼‰                     |
| **ç§Ÿæˆ·ï¼ˆTenantï¼‰**              | - æ³¨å†Œç§Ÿæˆ·<br>- ç»‘å®šç”¨æˆ·<br>- è®¾ç½®ç§Ÿæˆ·é…é¢/æƒé™<br>- æŸ¥è¯¢ç§Ÿæˆ·èµ„æºä½¿ç”¨æƒ…å†µ              | - ç§Ÿæˆ·èšåˆï¼ˆTenantAggregateï¼‰<br>- ç§Ÿæˆ·é…é¢å€¼å¯¹è±¡ï¼ˆTenantQuotaï¼‰<br>- ç”¨æˆ·ç»‘å®šå®ä½“ï¼ˆTenantUserï¼‰<br>- ç§Ÿæˆ·èµ„æºéš”ç¦»ç­–ç•¥æœåŠ¡ï¼ˆTenantPolicyï¼‰                      |

---

## ğŸ“Œ æ€»ç»“ï¼šæ¯å±‚èŒè´£æ€»è§ˆ

| å±‚çº§        | èŒè´£å…³é”®è¯               | æ¨¡å—èŒè´£ç¤ºæ„                                                                                  |
|-----------|---------------------|-----------------------------------------------------------------------------------------|
| **åº”ç”¨å±‚**   | ç¼–æ’æµç¨‹ã€äº‹åŠ¡æ§åˆ¶ã€è°ƒç”¨æœåŠ¡      | `AgentAppService.createAgent()`ã€`WorkflowAppService.run()`ã€`ModelAppService.register()` |
| **é¢†åŸŸå±‚**   | ä¸šåŠ¡å»ºæ¨¡ã€çŠ¶æ€å˜åŒ–ã€ä¸šåŠ¡è§„åˆ™ã€èšåˆç®¡ç† | `AgentAggregate.start()`ã€`WorkflowAggregate.addNode()`ã€`PluginAggregate.execute()`      |
| **åŸºç¡€è®¾æ–½å±‚** | æŠ€æœ¯å®ç°ã€æŒä¹…åŒ–ã€ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ    | Redisã€LLM API è°ƒç”¨ã€å‘é‡æ•°æ®åº“æ¥å…¥ã€æ—¥å¿—å­˜å‚¨ã€æ’ä»¶ç½‘å…³                                                      |

---

## ğŸ§© ç¤ºä¾‹ä»£ç ç»“æ„å»ºè®®ï¼ˆJava é¡¹ç›®åŒ…ç»“æ„ï¼‰

```
com.xxx.aiplatform
â”œâ”€â”€ application
â”‚   â””â”€â”€ agent
â”‚       â””â”€â”€ AgentAppService.java
â”‚   â””â”€â”€ workflow
â”‚       â””â”€â”€ WorkflowAppService.java
â”‚   â””â”€â”€ plugin
â”‚       â””â”€â”€ PluginAppService.java
â”‚   ...
â”œâ”€â”€ domain
â”‚   â””â”€â”€ agent
â”‚       â”œâ”€â”€ AgentAggregate.java
â”‚       â”œâ”€â”€ AgentProfile.java
â”‚       â””â”€â”€ AgentRuntimePolicy.java
â”‚   â””â”€â”€ workflow
â”‚       â”œâ”€â”€ WorkflowAggregate.java
â”‚       â”œâ”€â”€ Node.java
â”‚       â”œâ”€â”€ NodeContext.java
â”‚       â””â”€â”€ NodeExecutor.java
â”‚   ...
â”œâ”€â”€ infrastructure
â”‚   â””â”€â”€ vectorstore
â”‚       â””â”€â”€ MilvusVectorStore.java
â”‚   â””â”€â”€ llm
â”‚       â””â”€â”€ OpenAIClient.java
```
