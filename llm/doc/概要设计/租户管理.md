## 🧩 1. 租户生命周期管理

| 子功能          | 描述                           |
| ------------ | ---------------------------- |
| 租户创建（Create） | 注册/邀请/运营手动创建租户               |
| 租户读取（Read）   | 查看租户详情、套餐、资源使用情况等            |
| 租户更新（Update） | 修改租户名称、Logo、联系人等基本信息         |
| 租户删除（Delete） | 注销租户，逻辑删除或软删除                |
| 租户激活/禁用      | 激活后可用，禁用后所有成员不可登录，Agent 停止服务 |
| 租期策略配置       | 支持设置租期（如试用 14 天），过期自动降权或禁用   |
| 自动续期策略       | 自动续订套餐或发送续费提醒                |

---

## ⚙️ 2. 信息配置

| 子功能    | 描述                                        |
| ------ | ----------------------------------------- |
| 基本信息维护 | 名称、企业Logo、行业类型、联系方式、简介等                   |
| 自定义配置  | 允许租户配置个性化参数（如模型温度、UI主题色）                  |
| 域名绑定   | 支持企业将 Agent 页面绑定独立域名（如 `chat.mycorp.com`） |
| 品牌定制   | 支持定制登陆页、Logo、页脚、邮件模板等 Branding 信息         |

---

## 👥 3. 成员管理

| 子功能      | 描述                                   |
| -------- | ------------------------------------ |
| 成员邀请     | 管理员邀请成员加入组织，邮件/链接形式                  |
| 成员审批     | 可配置是否需要管理员审核后加入                      |
| 成员角色管理   | 系统预设角色：管理员、编辑者、查看者，也支持自定义角色          |
| 成员权限粒度控制 | 可设置成员能否访问某些模块（如 Prompt 编辑、Agent 发布等） |
| 成员移除/禁用  | 支持禁用成员或从租户中移除                        |
| 登录审计日志   | 登录时间、IP、设备、位置记录，用于安全审计               |

---

## 📦 4. 配额与资源限制

| 子功能        | 描述                              |
| ---------- | ------------------------------- |
| 用户数量限制     | 限制租户可添加的成员数量                    |
| API 调用次数限制 | 限制 GPT 调用次数、Embedding 请求数等      |
| 文件存储空间限制   | 限制上传文件总大小，向量存储配额等               |
| Token 限额   | 限制每月最大 Token 使用量                |
| 子资源数量限制    | 限制可创建的 Agent 数、数据集数、API Key 数量等 |

---

## 💳 5. 订阅套餐与计费

| 子功能    | 描述                          |
| ------ | --------------------------- |
| 套餐管理   | 定义多个套餐（免费、专业、企业等），附带配额和权限配置 |
| 租户订阅套餐 | 每个租户订阅某个套餐，平台据此启用对应功能       |
| 套餐变更   | 支持升级、降级套餐                   |
| 到期续费提醒 | 到期前发送邮件提醒续费                 |
| 付费方式集成 | Stripe / 微信支付 / 支付宝等接入支持    |
| 自动续费   | 可配置是否开启自动续订                 |
| 套餐试用期  | 试用期逻辑，自动转为正式套餐或锁定功能         |

---

## 📈 6. 账单与用量统计

| 子功能   | 描述                         |
| ----- | -------------------------- |
| 账单明细  | 每月账单、支付记录、消费项明细（按调用模型、存储等） |
| 使用量统计 | Token、调用次数、API访问量、知识库命中率等  |
| 用量预警  | 达到某个阈值时邮件/站内信预警            |
| 发票管理  | 查看、下载、补开发票等（针对企业付费用户）      |

---

## 🔐 7. 数据安全

| 子功能        | 描述                                |
| ---------- | --------------------------------- |
| 登录安全策略     | 限制弱密码、失败登录锁定、IP黑名单/白名单            |
| 单点登录（SSO）  | 支持 OAuth2.0、SAML、企业微信、钉钉登录集成      |
| 多因子认证（MFA） | 支持绑定手机、邮箱验证码、TOTP 应用              |
| API 鉴权     | 支持 API Key、Bearer Token、JWT 等鉴权方式 |
| 密钥加密存储     | 第三方 API Key、模型调用密钥采用加密存储          |
| 敏感操作日志     | 删除 Agent、配置模型等操作记录详细审计日志          |

---

## 🛡️ 8. 权限管理（RBAC）

| 子功能    | 描述                               |
| ------ | -------------------------------- |
| 角色管理   | 预设或自定义角色模板（如“Agent构建者”、“知识库管理员”） |
| 权限粒度控制 | 按模块、资源粒度控制（如只能访问特定 Agent）        |
| 项目权限分配 | 多项目管理，支持将某些项目只授权给特定成员            |
| 模块访问控制 | 按角色控制是否可访问“数据集”、“API管理”等模块       |
| 资源权限继承 | 新建资源（如Agent）默认继承创建者权限，可编辑分享权限    |
| 授权日志审计 | 查看权限变更记录，操作人和时间记录                |

---

## ✅ 总结为结构化清单

```
1. 生命周期管理
    - CRUD
    - 激活/禁用
    - 租期/续期策略
2. 信息配置
    - 基本信息
    - 自定义配置
    - 域名绑定
3. 成员管理
    - 邀请 / 审批 / 禁用 / 踢出
    - 角色与权限配置
    - 审计日志
4. 配额与资源
    - 成员数 / API调用 / 存储空间 / Token 限制
    - 子资源数（Agent、数据集等）
5. 套餐与计费
    - 订阅套餐（试用、升级、自动续费）
    - 资源绑定套餐
    - 支付渠道接入
6. 账单与用量
    - 月账单、发票
    - 调用量、消耗 Token、预警机制
7. 数据安全
    - SSO、MFA、安全策略
    - API 鉴权、密钥加密、审计日志
8. 权限管理
    - RBAC、功能访问控制
    - 项目级授权、继承、授权记录
```

---

**如你接下来想要做：

* **领域建模**：我可以帮你画出聚合、实体、值对象、服务等领域结构
* **数据库建模**：可生成完整 ER 图与表结构设计
* **多租户权限隔离实现方案（Spring Boot + MyBatisPlus）**

告诉我你的下一步即可。是否要开始设计 DDD 的 `Tenant` 聚合？**

